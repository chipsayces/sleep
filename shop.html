<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AuroraCharm | Shop All Bracelets</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Inter:wght@400;700;900&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        poster: ['"Luckiest Guy"', 'cursive'],
                    },
                    colors: {
                        'primary': '#f48fb1',
                        'secondary': '#a7ffeb',
                        'accent': '#ffd740',
                        'hotpink': '#ff4081',
                        'bg-soft': '#fce4ec',
                        'text-dark': '#4a148c',
                        'lavender': '#e1bee7',
                    }
                }
            }
        }
    </script>

    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            AOS.init({
                duration: 1000,
                once: true,
            });
        });
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            color: theme('colors.text-dark');
        }

        .container-padding {
            padding-left: 1rem;
            padding-right: 1rem;
        }

        /* Wide Pink Striped Background fills whole plaid-container section */
        .plaid-container {
            position: relative;
            background: repeating-linear-gradient(120deg,
                    rgba(244, 143, 177, 0.28) 0px,
                    rgba(244, 143, 177, 0.28) 80px,
                    transparent 80px,
                    transparent 160px);
            padding-top: 1px;
        }

        .plaid-container>* {
            position: relative;
            z-index: 1;
        }

        .shop-hero-bg {
            position: relative;
            overflow: hidden;
            border-bottom: 8px solid theme('colors.hotpink');
        }

        .product-card {
            border: 6px solid theme('colors.primary');
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            background-color: theme('colors.bg-soft');
            background-image: radial-gradient(theme('colors.lavender') 10%, transparent 10%),
                radial-gradient(theme('colors.lavender') 10%, transparent 10%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            transition: box-shadow 0.25s, transform 0.25s, border-color 0.25s;
        }

        .product-card-hover:hover {
            box-shadow: 0 25px 50px -12px rgba(255, 64, 129, 0.5);
            transform: translateY(-8px) scale(1.02);
            border-color: theme('colors.hotpink');
        }

        .image-container {
            position: relative;
            height: 200px;
            border: 6px solid #fd80aa;
            border-radius: 1rem;
            box-shadow: 0 0 0 4px #ffd74022, 0 6px 16px -6px rgba(244, 143, 177, 0.14);
            background: linear-gradient(135deg, rgba(255, 215, 64, 0.10), rgba(167, 255, 235, 0.10));
            overflow: hidden;
            transition: border-color 0.3s, box-shadow 0.3s, transform 0.3s;
        }

        .product-card:hover .image-container,
        .image-container:hover {
            border-color: #f48fb1;
            box-shadow: 0 0 0 6px #f48fb1aa, 0 12px 32px -10px #ff408155;
            transform: scale(1.045) rotate(-2deg);
        }

        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.30s cubic-bezier(.42, .6, .49, 1.31), box-shadow 0.3s;
        }

        .product-card:hover .image-container img,
        .image-container:hover img {
            transform: scale(1.08) rotate(-2deg);
            box-shadow: 0 8px 40px -4px #f48fb122;
        }

        .product-actions-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
            margin-top: 1rem;
            border-top: 1px solid #f48fb143;
            padding-top: 0.75rem;
            min-width: 0;
        }

        .card-price {
            font-size: 1.3rem;
            font-weight: 800;
            color: #4a148c;
            text-shadow: 0 2px 8px #fce4ec;
            background: linear-gradient(90deg, #ffd74011, #f48fb111);
            border-radius: 0.75rem;
            padding: 0.1em 0.45em;
            flex-shrink: 0;
            min-width: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .add-to-cart-btn {
            background: linear-gradient(90deg, #f48fb1, #ffd740);
            color: #4a148c !important;
            font-size: 1rem !important;
            font-weight: bold;
            box-shadow: 0 4px 12px -2px #ff4081bb;
            border-radius: 9999px;
            padding: 0.5em 1.1em;
            transition: all 0.22s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid #ffd740;
            flex-shrink: 1;
            min-width: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .add-to-cart-btn:hover {
            background: linear-gradient(90deg, #ffd740, #f48fb1 88%);
            color: #ff4081 !important;
            border-color: #f48fb1;
            box-shadow: 0 8px 18px -6px #ff408188;
            transform: scale(1.07) translateY(-2px);
        }
    </style>
</head>

<body class="bg-bg-soft font-sans text-text-dark">
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-sm shadow-xl">
        <div class="w-full flex justify-between items-center h-20 px-4">

            <h1 class="text-5xl font-poster text-hotpink tracking-wider flex items-center drop-shadow-md">
                ‚ú® AuroraCharm
            </h1>

            <nav class="hidden md:flex space-x-8 text-lg font-medium">
                <a href="index.html" class="hover:text-hotpink transition">Home</a>
                <a href="shop.html" class="text-hotpink font-semibold">Shop Bracelets</a>
                <a href="story.html" class="hover:text-hotpink transition">Our Story</a>
                <a href="contact.html" class="hover:text-hotpink transition">Contact Us</a>
            </nav>

            <div class="flex items-center space-x-4">
                <button id="cartButton"
                    class="bg-hotpink text-white px-6 py-3 rounded-full text-lg font-bold shadow-lg hover:bg-pink-600 transition duration-150 transform hover:scale-105">
                    Cart (<span id="cartCount">0</span>) üõí
                </button>

                <button id="logoutBtn" class="bg-hotpink text-white px-4 py-3 rounded-full text-lg font-bold shadow-lg 
                       hover:bg-pink-600 transition duration-150 transform hover:scale-105">
                    üë§
                </button>
            </div>

        </div>
    </header>

    <section class="shop-hero-bg relative text-white py-12 md:py-16 container-padding shadow-inner">
        <img src="images/bg.jpg" alt="Dreamy, sparkling charm background"
            class="absolute inset-0 w-full h-full object-cover z-0"
            onerror="this.onerror=null;this.src='https://placehold.co/1200x400/9e9e9e/ffffff?text=Background+Image+Error';">
        <div class="absolute inset-0 bg-primary opacity-15 z-10"></div>
        <div class="max-w-7xl mx-auto text-center relative z-20">
            <h2 class="text-6xl md:text-7xl font-poster leading-tight mb-4 text-white drop-shadow-lg">
                The Full Sparkle Collection
            </h2>
            <p class="text-xl md:text-2xl font-semibold text-white/90 drop-shadow-md">
                Handcrafted treasures for every adventure. Find the charm that speaks to your soul!
            </p>
        </div>
    </section>

    <!-- MAIN CONTENT WRAPPER WITH STRIPES -->
    <div class="plaid-container">
        <main class="py-16 container-padding">
            <div class="max-w-7xl mx-auto">
                <!-- Filter and Sort Controls -->
                <div class="mb-14 p-6 bg-white rounded-3xl shadow-2xl border-8 border-accent/70 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-6"
                    data-aos="zoom-in">
                    <div class="w-full sm:w-auto">
                        <label for="categoryFilter" class="block text-xl font-bold mb-2 text-hotpink">Filter by
                            Category:</label>
                        <select id="categoryFilter"
                            class="p-4 w-full sm:w-56 rounded-xl border-3 border-primary focus:ring-hotpink focus:border-hotpink shadow-inner text-lg font-semibold">
                            <option value="All">All Categories</option>
                            <option value="Everyday">Everyday Sparkle</option>
                            <option value="Fantasy">Magical & Fantasy</option>
                            <option value="Nature">Outdoor Adventures</option>
                            <option value="Food">Sweet Treats</option>
                            <option value="Tech">Modern Pixels</option>
                            <option value="Luxury">Premium Charms</option>
                        </select>
                    </div>
                    <div class="w-full sm:w-auto">
                        <label for="priceSort" class="block text-xl font-bold mb-2 text-hotpink">Sort by
                            Price:</label>
                        <select id="priceSort"
                            class="p-4 w-full sm:w-56 rounded-xl border-3 border-primary focus:ring-hotpink focus:border-hotpink shadow-inner text-lg font-semibold">
                            <option value="default">Default Order</option>
                            <option value="lowToHigh">Price: Low to High</option>
                            <option value="highToLow">Price: High to Low</option>
                        </select>
                    </div>
                    <button id="resetButton"
                        class="bg-secondary text-text-dark px-6 py-3 rounded-full font-bold shadow-lg hover:bg-secondary/80 transition duration-150 transform hover:scale-105 w-full sm:w-auto text-lg uppercase">
                        Reset Sparkle
                    </button>
                </div>
                <div id="productGrid"
                    class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-8 transition-opacity duration-500 ease-in-out">
                    <!-- Products will be injected here by JavaScript -->
                </div>
                <p id="noProducts" class="text-center text-4xl font-poster text-primary mt-20 hidden">
                    Oops! No charms found in this category. Try another sparkle! ‚ú®
                </p>
            </div>
        </main>
    </div>

    <footer class="bg-gray-900 text-white py-10 mt-16">
        <div class="max-w-7xl mx-auto text-center container-padding">
            <h3 class="text-4xl font-poster text-accent mb-4 drop-shadow-md">AuroraCharm</h3>
            <p class="text-gray-300">&copy; 2025 AuroraCharm. Where every wrist tells a story. Find your sparkle
                today!</p>
            <div class="mt-4 text-base text-gray-400 space-x-6">
                <a href="#" class="hover:text-hotpink transition duration-150 font-semibold">Privacy Policy</a>
                <span class="text-gray-600">|</span>
                <a href="#" class="hover:text-hotpink transition duration-150 font-semibold">Terms of Service</a>
                <span class="text-gray-600">|</span>
                <a href="#" class="hover:text-hotpink transition duration-150 font-semibold">FAQs</a>
            </div>
        </div>
    </footer>
    <div id="logoutModal" role="dialog" aria-modal="true" aria-labelledby="logoutTitle"
        style="display:none;position:fixed;inset:0;z-index:60;align-items:center;justify-content:center;">
        <div class="backdrop" style="position:absolute;inset:0;background:rgba(10,10,10,0.5);" data-dismiss="modal">
        </div>
        <div class="panel"
            style="position:relative;z-index:2;background:#fff;padding:1.25rem;border-radius:12px;box-shadow:0 20px 50px rgba(0,0,0,0.25);width:90%;max-width:420px;text-align:center;">
            <h3 id="logoutTitle" style="font-size:1.25rem;font-weight:700;margin-bottom:.5rem;color:#1f1f1f;">Sign
                out
                of AuroraCharm (‚ï•Ôπè‚ï•)?</h3>
            <p style="color:#4b5563;font-size:.95rem;margin-bottom:1rem;">You will be returned to the sign-in page..
                Your
                cart will remain saved locally unless you clear it.</p>
            <div style="display:flex;gap:.5rem;justify-content:center;">
                <button id="logoutCancel" class="cancel"
                    style="padding:.5rem 1rem;border-radius:999px;background:#f3f4f6;border:none;">Cancel</button>
                <button id="logoutConfirm" class="confirm"
                    style="padding:.5rem 1rem;border-radius:999px;background:linear-gradient(90deg,#ff6f9a,#ffd740);color:#4a148c;border:none;font-weight:700;">Sign
                    out</button>
            </div>
        </div>
    </div>

    <script>
        // Toggle modal helpers
        const logoutBtn = document.getElementById('logoutBtn');
        const logoutModal = document.getElementById('logoutModal');
        const logoutCancel = document.getElementById('logoutCancel');
        const logoutConfirm = document.getElementById('logoutConfirm');

        function openLogoutModal() {
            if (!logoutModal) return;
            logoutModal.style.display = 'flex';
            // focus confirm for accessibility
            logoutConfirm && logoutConfirm.focus();
        }
        function closeLogoutModal() {
            if (!logoutModal) return;
            logoutModal.style.display = 'none';
        }

        // show logout button if user is signed in
        (function showLogoutIfSigned() {
            try {
                const u = localStorage.getItem('auroracharm_user');
                if (u) {
                    const btn = document.getElementById('logoutBtn');
                    if (btn) btn.classList.remove('hidden');
                }
            } catch (e) { /* ignore */ }
        })();

        // Attach listeners (guard for pages without the elements)
        if (logoutBtn) logoutBtn.addEventListener('click', openLogoutModal);
        if (logoutCancel) logoutCancel.addEventListener('click', closeLogoutModal);
        const backdrop = logoutModal && logoutModal.querySelector('.backdrop');
        if (backdrop) backdrop.addEventListener('click', closeLogoutModal);

        // Confirm logout: clear session and redirect to auth/sign-in page
        if (logoutConfirm) logoutConfirm.addEventListener('click', () => {
            try {
                // Remove the session flag
                localStorage.removeItem('auroracharm_user');

                // OPTIONAL: clear per-browser cart (uncomment if desired)
                // localStorage.removeItem('auroracharm_cart_count');
                // localStorage.removeItem('auroracharm_cart');

                // small UX toast can go here if you have one; then redirect
            } catch (e) {
                // ignore
            } finally {
                // Close modal then redirect
                closeLogoutModal();
                // short delay so user sees modal closing
                setTimeout(() => { window.location.href = 'auth.html'; }, 200);
            }
        });

        // accessibility: close modal on ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && logoutModal && logoutModal.style.display === 'flex') {
                closeLogoutModal();
            }
        });
        const products = [
            {
                id: 'S1', name: 'Cosmic Unicorn', description: 'Sparkly rainbow beads and unicorn charms.', price: 38.50, category: 'Fantasy', colorClass: '',
                imageUrl: "images/uni.jpg"
            },
            {
                id: 'S2', name: 'Ocean Tides', description: 'Deep blue and teal beads with seashell charms.', price: 32.00, category: 'Nature', colorClass: '',
                imageUrl: "images/ocean.jpg"
            },
            {
                id: 'S3', name: 'Strawberry Shortcake', description: 'Pink and red charms with a fruity twist.', price: 29.99, category: 'Food', colorClass: '',
                imageUrl: "images/straw.jpg"
            },
            {
                id: 'S4', name: 'Tiny Dino Land', description: 'Green and brown beads with tiny dinosaur charms.', price: 34.99, category: 'Fantasy', colorClass: '',
                imageUrl: "images/dino.jpg"
            },
            {
                id: 'S5', name: 'Lucky Clover', description: 'Simple green design with good luck charms.', price: 25.00, category: 'Nature', colorClass: '',
                imageUrl: "images/clover.jpg"
            },
            {
                id: 'S6', name: 'Pastel Dreams', description: 'Soft pink, blue, and yellow mix with cloud charms.', price: 42.00, category: 'Everyday', colorClass: '',
                imageUrl: "images/cloud.jpg"
            },
            {
                id: 'S7', name: 'Gamer Pixel', description: 'Black and neon charms for the ultimate player.', price: 31.00, category: 'Tech', colorClass: '',
                imageUrl: "images/pixel.jpg"
            },
            {
                id: 'S8', name: 'Zodiac Star', description: 'Personalized charm with a constellation theme.', price: 49.99, category: 'Luxury', colorClass: '',
                imageUrl: "images/const.jpg"
            },
            {
                id: 'S9', name: 'Little Ladybug', description: 'Red and black beads with cute insect charms.', price: 28.00, category: 'Nature', colorClass: '',
                imageUrl: "images/lady.jpg"
            },
            {
                id: 'S10', name: 'Sunshine Day', description: 'Bright yellow and orange beads for happy days.', price: 27.50, category: 'Everyday', colorClass: '',
                imageUrl: "images/sun.jpg"
            },
            {
                id: 'S11', name: 'Magic Potion', description: 'Lavender and mint gradient with mystical bottle charms.', price: 39.00, category: 'Fantasy', colorClass: '',
                imageUrl: "images/potion.jpg"
            }
        ];

        let cartItems = 0;
        const cartCountElement = document.getElementById('cartCount');
        const productGrid = document.getElementById('productGrid');
        const categoryFilter = document.getElementById('categoryFilter');
        const priceSort = document.getElementById('priceSort');
        const noProductsMessage = document.getElementById('noProducts');
        const resetButton = document.getElementById('resetButton');

        function alertUser(message) {
            const existingAlert = document.getElementById('custom-alert');
            if (existingAlert) { existingAlert.remove(); }
            const alertDiv = document.createElement('div');
            alertDiv.id = 'custom-alert';
            alertDiv.className = 'fixed top-6 left-1/2 transform -translate-x-1/2 bg-hotpink text-white px-8 py-4 rounded-full shadow-2xl z-[9999] opacity-0 transition-opacity duration-500 ease-out font-poster text-xl text-center border-4 border-white';
            alertDiv.textContent = message;
            document.body.appendChild(alertDiv);
            setTimeout(() => {
                alertDiv.style.opacity = '1';
            }, 10);
            setTimeout(() => {
                alertDiv.style.opacity = '0';
                setTimeout(() => alertDiv.remove(), 500);
            }, 3000);
        }

        function addToCart(productId, productName) {
            cartItems++;
            cartCountElement.textContent = cartItems;
            alertUser(`"${productName}" added to cart! Total items: ${cartItems} üõçÔ∏è`);
        }

        function renderProducts(currentProducts) {
            productGrid.innerHTML = '';
            if (currentProducts.length === 0) {
                noProductsMessage.classList.remove('hidden');
            } else {
                noProductsMessage.classList.add('hidden');
            }
            currentProducts.forEach((product, index) => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card product-card-hover p-4 rounded-3xl shadow-xl transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer';
                productCard.setAttribute('data-product-id', product.id);
                productCard.setAttribute('data-aos', 'fade-up');
                productCard.setAttribute('data-aos-delay', (index % 5) * 100);
                productCard.innerHTML = `
                <div class="image-container ${product.colorClass} rounded-xl mb-4 shadow-inner">
                    <img 
                        src="${product.imageUrl}" 
                        alt="${product.name} charm bracelet"
                        onerror="this.onerror=null;this.src='https://placehold.co/300x300/9e9e9e/ffffff?text=Image+Error';"
                    >
                </div>
                <h4 class="font-poster text-2xl mb-1 text-hotpink leading-tight">${product.name}</h4>
                <span class="inline-block text-xs font-semibold uppercase tracking-wider px-3 py-1 bg-secondary rounded-full text-text-dark mb-2 shadow-sm">${product.category}</span>
                <p class="text-sm text-text-dark/90 h-10 overflow-hidden mb-3">${product.description}</p>
                <div class="product-actions-row">
                    <span class="card-price">$${product.price.toFixed(2)}</span>
                    <button class="add-to-cart-btn">Sparkle Up!</button>
                </div>
            `;
                productCard.querySelector('.add-to-cart-btn').addEventListener('click', (event) => {
                    event.stopPropagation();
                    addToCart(product.id, product.name);
                });
                productGrid.appendChild(productCard);
            });
        }

        function applyFiltersAndSort() {
            let filteredProducts = [...products];
            const selectedCategory = categoryFilter.value;
            const selectedSort = priceSort.value;
            if (selectedCategory !== 'All') {
                filteredProducts = filteredProducts.filter(p => p.category.includes(selectedCategory));
            }
            if (selectedSort === 'lowToHigh') {
                filteredProducts.sort((a, b) => a.price - b.price);
            } else if (selectedSort === 'highToLow') {
                filteredProducts.sort((a, b) => b.price - a.price);
            }
            if (productGrid.children.length > 0 && productGrid.classList.contains('opacity-0') === false) {
                productGrid.classList.add('opacity-0');
            } else {
                renderNewContent();
                return;
            }
            setTimeout(() => {
                renderNewContent();
                requestAnimationFrame(() => {
                    productGrid.classList.remove('opacity-0');
                });
            }, 500);
            function renderNewContent() {
                renderProducts(filteredProducts);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            applyFiltersAndSort();
            categoryFilter.addEventListener('change', applyFiltersAndSort);
            priceSort.addEventListener('change', applyFiltersAndSort);
            resetButton.addEventListener('click', () => {
                categoryFilter.value = 'All';
                priceSort.value = 'default';
                applyFiltersAndSort();
            });
        });
    </script>
</body>

</html>